var Et=Object.defineProperty;var Dt=(t,o,l)=>o in t?Et(t,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[o]=l;var Q=(t,o,l)=>Dt(t,typeof o!="symbol"?o+"":o,l);(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function l(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(e){if(e.ep)return;e.ep=!0;const s=l(e);fetch(e.href,s)}})();function N(){}function yt(t){return t()}function rt(){return Object.create(null)}function j(t){t.forEach(yt)}function lt(t){return typeof t=="function"}function St(t,o){return t!=t?o==o:t!==o||t&&typeof t=="object"||typeof t=="function"}function kt(t){return Object.keys(t).length===0}function W(t){return t??""}function Pt(t){return t&&lt(t.destroy)?t.destroy:N}function d(t,o){t.appendChild(o)}function $(t,o,l){t.insertBefore(o,l||null)}function A(t){t.parentNode&&t.parentNode.removeChild(t)}function G(t,o){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(o)}function g(t){return document.createElement(t)}function Ot(t){return document.createTextNode(t)}function w(){return Ot(" ")}function C(t,o,l,n){return t.addEventListener(o,l,n),()=>t.removeEventListener(o,l,n)}function m(t,o,l){l==null?t.removeAttribute(o):t.getAttribute(o)!==l&&t.setAttribute(o,l)}function wt(t){return Array.from(t.childNodes)}function it(t,o){t.value=o??""}let z;function q(t){z=t}function Tt(){if(!z)throw new Error("Function called outside component initialization");return z}function Ct(t){Tt().$$.on_mount.push(t)}const U=[],et=[];let Z=[];const at=[],Ht=Promise.resolve();let nt=!1;function It(){nt||(nt=!0,Ht.then(bt))}function ot(t){Z.push(t)}const tt=new Set;let F=0;function bt(){if(F!==0)return;const t=z;do{try{for(;F<U.length;){const o=U[F];F++,q(o),Lt(o.$$)}}catch(o){throw U.length=0,F=0,o}for(q(null),U.length=0,F=0;et.length;)et.pop()();for(let o=0;o<Z.length;o+=1){const l=Z[o];tt.has(l)||(tt.add(l),l())}Z.length=0}while(U.length);for(;at.length;)at.pop()();nt=!1,tt.clear(),q(t)}function Lt(t){if(t.fragment!==null){t.update(),j(t.before_update);const o=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,o),t.after_update.forEach(ot)}}function At(t){const o=[],l=[];Z.forEach(n=>t.indexOf(n)===-1?o.push(n):l.push(n)),l.forEach(n=>n()),Z=o}const Mt=new Set;function xt(t,o){t&&t.i&&(Mt.delete(t),t.i(o))}function L(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Rt(t,o,l){const{fragment:n,after_update:e}=t.$$;n&&n.m(o,l),ot(()=>{const s=t.$$.on_mount.map(yt).filter(lt);t.$$.on_destroy?t.$$.on_destroy.push(...s):j(s),t.$$.on_mount=[]}),e.forEach(ot)}function $t(t,o){const l=t.$$;l.fragment!==null&&(At(l.after_update),j(l.on_destroy),l.fragment&&l.fragment.d(o),l.on_destroy=l.fragment=null,l.ctx=[])}function Nt(t,o){t.$$.dirty[0]===-1&&(U.push(t),It(),t.$$.dirty.fill(0)),t.$$.dirty[o/31|0]|=1<<o%31}function jt(t,o,l,n,e,s,r=null,a=[-1]){const f=z;q(t);const c=t.$$={fragment:null,ctx:[],props:s,update:N,not_equal:e,bound:rt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(f?f.$$.context:[])),callbacks:rt(),dirty:a,skip_bound:!1,root:o.target||f.$$.root};r&&r(c.root);let E=!1;if(c.ctx=l?l(t,o.props||{},(h,D,...O)=>{const p=O.length?O[0]:D;return c.ctx&&e(c.ctx[h],c.ctx[h]=p)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](p),E&&Nt(t,h)),D}):[],c.update(),E=!0,j(c.before_update),c.fragment=n?n(c.ctx):!1,o.target){if(o.hydrate){const h=wt(o.target);c.fragment&&c.fragment.l(h),h.forEach(A)}else c.fragment&&c.fragment.c();o.intro&&xt(t.$$.fragment),Rt(t,o.target,o.anchor),bt()}q(f)}class Bt{constructor(){Q(this,"$$");Q(this,"$$set")}$destroy(){$t(this,1),this.$destroy=N}$on(o,l){if(!lt(l))return N;const n=this.$$.callbacks[o]||(this.$$.callbacks[o]=[]);return n.push(l),()=>{const e=n.indexOf(l);e!==-1&&n.splice(e,1)}}$set(o){this.$$set&&!kt(o)&&(this.$$.skip_bound=!0,this.$$set(o),this.$$.skip_bound=!1)}}const Kt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Kt);const J=[[2],[3],[4,2],[4,3],[4,3,2],[4,3,3],[4,3,3,1],[4,3,3,2],[4,3,3,3,1],[4,3,3,3,2],[4,3,3,3,2,1],[4,3,3,3,2,1],[4,3,3,3,2,1,1],[4,3,3,3,2,1,1],[4,3,3,3,2,1,1,1],[4,3,3,3,2,1,1,1],[4,3,3,3,2,1,1,1,1],[4,3,3,3,3,1,1,1,1],[4,3,3,3,3,2,1,1,1],[4,3,3,3,3,2,2,1,1]];var ct;(function(t){var o=function(){function n(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(n.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(e){this._dropEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(e){this._effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),n.prototype.clearData=function(e){e!=null?delete this._data[e]:this._data=null},n.prototype.getData=function(e){return this._data[e]||""},n.prototype.setData=function(e,s){this._data[e]=s},n.prototype.setDragImage=function(e,s,r){var a=l._instance;a._imgCustom=e,a._imgOffset={x:s,y:r}},n}();t.DataTransfer=o;var l=function(){function n(){if(this._lastClick=0,n._instance)throw"DragDropTouch instance already created.";var e=!1;if(document.addEventListener("test",function(){},{get passive(){return e=!0,!0}}),"ontouchstart"in document){var s=document,r=this._touchstart.bind(this),a=this._touchmove.bind(this),f=this._touchend.bind(this),c=e?{passive:!1,capture:!1}:!1;s.addEventListener("touchstart",r,c),s.addEventListener("touchmove",a,c),s.addEventListener("touchend",f),s.addEventListener("touchcancel",f)}}return n.getInstance=function(){return n._instance},n.prototype._touchstart=function(e){var s=this;if(this._shouldHandle(e)){if(Date.now()-this._lastClick<n._DBLCLICK&&this._dispatchEvent(e,"dblclick",e.target)){e.cancelable&&e.preventDefault(),this._reset();return}this._reset();var r=this._closestDraggable(e.target);r&&!this._dispatchEvent(e,"mousemove",e.target)&&!this._dispatchEvent(e,"mousedown",e.target)&&(this._dragSource=r,this._ptDown=this._getPoint(e),this._lastTouch=e,e.cancelable&&e.preventDefault(),setTimeout(function(){s._dragSource==r&&s._img==null&&s._dispatchEvent(e,"contextmenu",r)&&s._reset()},n._CTXMENU),n._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){s._isDragEnabled=!0,s._touchmove(e)},n._PRESSHOLDAWAIT)))}},n.prototype._touchmove=function(e){if(this._shouldCancelPressHoldMove(e)){this._reset();return}if(this._shouldHandleMove(e)||this._shouldHandlePressHoldMove(e)){var s=this._getTarget(e);if(this._dispatchEvent(e,"mousemove",s)){this._lastTouch=e,e.cancelable&&e.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(e)&&(this._dispatchEvent(e,"dragstart",this._dragSource),this._createImage(e),this._dispatchEvent(e,"dragenter",s)),this._img&&(this._lastTouch=e,e.cancelable&&e.preventDefault(),s!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(e,"dragenter",s),this._lastTarget=s),this._moveImage(e),this._isDropZone=this._dispatchEvent(e,"dragover",s))}},n.prototype._touchend=function(e){if(this._shouldHandle(e)){if(this._dispatchEvent(this._lastTouch,"mouseup",e.target)){e.cancelable&&e.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",e.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(e.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},n.prototype._shouldHandle=function(e){return e&&!e.defaultPrevented&&e.touches&&e.touches.length<2},n.prototype._shouldHandleMove=function(e){return!n._ISPRESSHOLDMODE&&this._shouldHandle(e)},n.prototype._shouldHandlePressHoldMove=function(e){return n._ISPRESSHOLDMODE&&this._isDragEnabled&&e&&e.touches&&e.touches.length},n.prototype._shouldCancelPressHoldMove=function(e){return n._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(e)>n._PRESSHOLDMARGIN},n.prototype._shouldStartDragging=function(e){var s=this._getDelta(e);return s>n._THRESHOLD||n._ISPRESSHOLDMODE&&s>=n._PRESSHOLDTHRESHOLD},n.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new o,clearInterval(this._pressHoldInterval)},n.prototype._getPoint=function(e,s){return e&&e.touches&&(e=e.touches[0]),{x:s?e.pageX:e.clientX,y:s?e.pageY:e.clientY}},n.prototype._getDelta=function(e){if(n._ISPRESSHOLDMODE&&!this._ptDown)return 0;var s=this._getPoint(e);return Math.abs(s.x-this._ptDown.x)+Math.abs(s.y-this._ptDown.y)},n.prototype._getTarget=function(e){for(var s=this._getPoint(e),r=document.elementFromPoint(s.x,s.y);r&&getComputedStyle(r).pointerEvents=="none";)r=r.parentElement;return r},n.prototype._createImage=function(e){this._img&&this._destroyImage();var s=this._imgCustom||this._dragSource;if(this._img=s.cloneNode(!0),this._copyStyle(s,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var r=s.getBoundingClientRect(),a=this._getPoint(e);this._imgOffset={x:a.x-r.left,y:a.y-r.top},this._img.style.opacity=n._OPACITY.toString()}this._moveImage(e),document.body.appendChild(this._img)},n.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},n.prototype._moveImage=function(e){var s=this;requestAnimationFrame(function(){if(s._img){var r=s._getPoint(e,!0),a=s._img.style;a.position="absolute",a.pointerEvents="none",a.zIndex="999999",a.left=Math.round(r.x-s._imgOffset.x)+"px",a.top=Math.round(r.y-s._imgOffset.y)+"px"}})},n.prototype._copyProps=function(e,s,r){for(var a=0;a<r.length;a++){var f=r[a];e[f]=s[f]}},n.prototype._copyStyle=function(e,s){if(n._rmvAtts.forEach(function(h){s.removeAttribute(h)}),e instanceof HTMLCanvasElement){var r=e,a=s;a.width=r.width,a.height=r.height,a.getContext("2d").drawImage(r,0,0)}for(var f=getComputedStyle(e),c=0;c<f.length;c++){var E=f[c];E.indexOf("transition")<0&&(s.style[E]=f[E])}s.style.pointerEvents="none";for(var c=0;c<e.children.length;c++)this._copyStyle(e.children[c],s.children[c])},n.prototype._dispatchEvent=function(e,s,r){if(e&&r){var a=document.createEvent("Event"),f=e.touches?e.touches[0]:e;return a.initEvent(s,!0,!0),a.button=0,a.which=a.buttons=1,this._copyProps(a,e,n._kbdProps),this._copyProps(a,f,n._ptProps),a.dataTransfer=this._dataTransfer,r.dispatchEvent(a),a.defaultPrevented}return!1},n.prototype._closestDraggable=function(e){for(;e;e=e.parentElement)if(e.hasAttribute("draggable")&&e.draggable)return e;return null},n}();l._instance=new l,l._THRESHOLD=5,l._OPACITY=.5,l._DBLCLICK=500,l._CTXMENU=900,l._ISPRESSHOLDMODE=!1,l._PRESSHOLDAWAIT=400,l._PRESSHOLDMARGIN=25,l._PRESSHOLDTHRESHOLD=0,l._rmvAtts="id,class,style,draggable".split(","),l._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),l._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),t.DragDropTouch=l})(ct||(ct={}));function Xt(t,o,l){t.draggable=!0,t.style.cursor="grab"}function ut(t,o,l){const n=t.slice();return n[17]=o[l],n[18]=o,n[19]=l,n}function ft(t,o,l){const n=t.slice();return n[20]=o[l],n}function ht(t,o,l){const n=t.slice();return n[23]=o[l],n[25]=l,n}function dt(t,o,l){const n=t.slice();return n[20]=o[l],n[27]=l,n}function _t(t){let o,l;return{c(){o=g("div"),m(o,"class",l=W(vt(t[23],t[25],t[27],t[0].deltas))+" svelte-1y5rtok")},m(n,e){$(n,o,e)},p(n,e){e&1&&l!==(l=W(vt(n[23],n[25],n[27],n[0].deltas))+" svelte-1y5rtok")&&m(o,"class",l)},d(n){n&&A(o)}}}function pt(t){let o,l,n,e,s,r,a,f,c,E,h;function D(){return t[8](t[25],t[23])}let O=L(Array(t[23]+Math.max(0,t[0].deltas[t[25]]))),p=[];for(let v=0;v<O.length;v+=1)p[v]=_t(dt(t,O,v));function B(){return t[9](t[25],t[23])}return{c(){o=g("div"),l=g("h2"),l.textContent=`${t[25]+1}`,n=w(),e=g("button"),e.textContent="-",s=w(),r=g("div");for(let v=0;v<p.length;v+=1)p[v].c();a=w(),f=g("button"),f.textContent="+",c=w(),m(l,"class","svelte-1y5rtok"),m(r,"class","flex wrap svelte-1y5rtok"),m(o,"class","flex svelte-1y5rtok")},m(v,H){$(v,o,H),d(o,l),d(o,n),d(o,e),d(o,s),d(o,r);for(let y=0;y<p.length;y+=1)p[y]&&p[y].m(r,null);d(o,a),d(o,f),d(o,c),E||(h=[Pt(Xt.call(null,l)),C(e,"click",D),C(f,"click",B)],E=!0)},p(v,H){if(t=v,H&1){O=L(Array(t[23]+Math.max(0,t[0].deltas[t[25]])));let y;for(y=0;y<O.length;y+=1){const M=dt(t,O,y);p[y]?p[y].p(M,H):(p[y]=_t(M),p[y].c(),p[y].m(r,null))}for(;y<p.length;y+=1)p[y].d(1);p.length=O.length}},d(v){v&&A(o),G(p,v),E=!1,j(h)}}}function gt(t){let o;return{c(){o=g("div"),m(o,"class","box white svelte-1y5rtok")},m(l,n){$(l,o,n)},p:N,d(l){l&&A(o)}}}function mt(t){let o,l,n,e,s,r,a,f;function c(){t[12].call(l,t[18],t[19])}function E(){return t[14](t[17],t[18],t[19])}return{c(){o=g("div"),l=g("input"),n=w(),e=g("button"),r=w(),m(l,"class","box field svelte-1y5rtok"),m(l,"type","text"),m(e,"class",s=W(t[17].state?"box white":"box")+" svelte-1y5rtok"),m(o,"class","flex svelte-1y5rtok")},m(h,D){$(h,o,D),d(o,l),it(l,t[17].name),d(o,n),d(o,e),d(o,r),a||(f=[C(l,"input",c),C(l,"blur",t[13]),C(e,"click",E)],a=!0)},p(h,D){t=h,D&1&&l.value!==t[17].name&&it(l,t[17].name),D&1&&s!==(s=W(t[17].state?"box white":"box")+" svelte-1y5rtok")&&m(e,"class",s)},d(h){h&&A(o),a=!1,j(f)}}}function Yt(t){let o,l,n,e,s,r,a,f,c,E,h,D,O,p,B,v,H,y,M,_,b,x,I,V,st,K=L(J[t[0].level-1]),S=[];for(let u=0;u<K.length;u+=1)S[u]=pt(ht(t,K,u));let X=L(Array(t[0].sps).fill(0)),k=[];for(let u=0;u<X.length;u+=1)k[u]=gt(ft(t,X,u));let Y=L(t[0].onePerDays),P=[];for(let u=0;u<Y.length;u+=1)P[u]=mt(ut(t,Y,u));return{c(){o=g("main"),l=g("h1"),l.textContent="Spell Slots",n=w(),e=g("section"),s=g("input"),r=w(),a=g("section"),f=g("div");for(let u=0;u<S.length;u+=1)S[u].c();c=w(),E=g("section"),h=g("div"),D=g("h2"),D.textContent="SP",O=w(),p=g("button"),p.textContent="-",B=w(),v=g("div");for(let u=0;u<k.length;u+=1)k[u].c();H=w(),y=g("button"),y.textContent="+",M=w(),_=g("section"),b=g("div");for(let u=0;u<P.length;u+=1)P[u].c();x=w(),I=g("button"),I.textContent="Add a once-per-day",m(s,"class","box field m0a svelte-1y5rtok"),m(s,"type","number"),m(s,"min","1"),m(s,"max",J.length),m(e,"class","flex svelte-1y5rtok"),m(a,"class","svelte-1y5rtok"),m(D,"class","sp-offset svelte-1y5rtok"),m(v,"class","flex wrap svelte-1y5rtok"),m(h,"class","flex svelte-1y5rtok"),m(E,"class","svelte-1y5rtok"),m(b,"class","m0a svelte-1y5rtok"),m(I,"class","m0a svelte-1y5rtok"),m(_,"class","svelte-1y5rtok")},m(u,T){$(u,o,T),d(o,l),d(o,n),d(o,e),d(e,s),t[6](s),d(o,r),d(o,a),d(a,f);for(let i=0;i<S.length;i+=1)S[i]&&S[i].m(f,null);d(o,c),d(o,E),d(E,h),d(h,D),d(h,O),d(h,p),d(h,B),d(h,v);for(let i=0;i<k.length;i+=1)k[i]&&k[i].m(v,null);d(h,H),d(h,y),$(u,M,T),$(u,_,T),d(_,b);for(let i=0;i<P.length;i+=1)P[i]&&P[i].m(b,null);d(_,x),d(_,I),V||(st=[C(s,"input",t[7]),C(p,"click",t[10]),C(y,"click",t[11]),C(I,"click",t[15])],V=!0)},p(u,[T]){if(T&5){K=L(J[u[0].level-1]);let i;for(i=0;i<K.length;i+=1){const R=ht(u,K,i);S[i]?S[i].p(R,T):(S[i]=pt(R),S[i].c(),S[i].m(f,null))}for(;i<S.length;i+=1)S[i].d(1);S.length=K.length}if(T&1){X=L(Array(u[0].sps).fill(0));let i;for(i=0;i<X.length;i+=1){const R=ft(u,X,i);k[i]?k[i].p(R,T):(k[i]=gt(),k[i].c(),k[i].m(v,null))}for(;i<k.length;i+=1)k[i].d(1);k.length=X.length}if(T&33){Y=L(u[0].onePerDays);let i;for(i=0;i<Y.length;i+=1){const R=ut(u,Y,i);P[i]?P[i].p(R,T):(P[i]=mt(R),P[i].c(),P[i].m(b,null))}for(;i<P.length;i+=1)P[i].d(1);P.length=Y.length}},i:N,o:N,d(u){u&&(A(o),A(M),A(_)),t[6](null),G(S,u),G(k,u),G(P,u),V=!1,j(st)}}}function vt(t,o,l,n){return l>t-1?"box green":l<t+n[o]?"box white":"box"}function Ft(t,o,l){let n;const e=localStorage.getItem("characterData");e==null?n={level:1,deltas:[0],onePerDays:[],sps:0}:n=JSON.parse(e);var s;Ct(()=>{l(1,s.value=n.level,s)});function r(_,b,x=!1){x?n.deltas[_]>-b&&l(0,n.deltas[_]--,n):l(0,n.deltas[_]+=1,n),c()}function a(_=!1){l(0,n.sps+=_?-1:1,n),l(0,n.sps=Math.max(n.sps,0),n),c()}function f(_){const b=_.target.value;l(0,n.deltas=Array(J[b?b-1:1].length).fill(0).map((x,I)=>I<n.deltas.length?n.deltas[I]:0),n),l(0,n.level=b||1,n),c()}function c(){localStorage.setItem("characterData",JSON.stringify(n))}function E(_){et[_?"unshift":"push"](()=>{s=_,l(1,s)})}const h=_=>f(_),D=(_,b)=>r(_,b,!0),O=(_,b)=>r(_,b),p=()=>a(!0),B=()=>a();function v(_,b){_[b].name=this.value,l(0,n)}return[n,s,r,a,f,c,E,h,D,O,p,B,v,()=>{l(0,n.onePerDays=n.onePerDays.filter(_=>_.name!=""),n),c()},(_,b,x)=>{l(0,b[x].state=!_.state,n),c()},()=>{n.onePerDays.push({name:"Spell",state:!0}),l(0,n),c()}]}class Ut extends Bt{constructor(o){super(),jt(this,o,Ft,Yt,St,{})}}new Ut({target:document.getElementById("app")});
